{% extends 'base.html.twig' %}

{% block title %}Yadelair{% endblock %}

{% block body %}
	<!-- **************** MAIN CONTENT START **************** -->
<main>

<!--Slider DEBUT-->
<section>
	<div class="row g-0">
		<div class="col-xxl-10 mx-auto rounded-3 overflow-hidden">
			<div class="tiny-slider arrow-hover arrow-blur arrow-round position-relative">
				<div class="container-fluid">
					<div class="tiny-slider-inner" data-autoplay="false" data-hoverpause="true" data-gutter="2" data-arrow="false" data-dots="true" data-items="1">

							<!-- Slider Image -->
							<!--boucles des articles-->
						{% for article in articles %}
							<!--IMAGE DE L'ARTICLE-->
							<div class="card bg-dark-overlay-3 rounded-0 h-400 h-lg-500 h-xl-700 position-relative overflow-hidden" style="background-image:url({{ vich_uploader_asset (article, 'imageFile')|default(asset('uploads/articles/Yadelair1.jpg'))| imagine_filter ('slider') }}); background-position: center left; background-size: cover;"> <!-- Card Image overlay -->
								<div class="card-img-overlay rounded-0 d-flex align-items-center">
									<div class="container px-3 my-auto">
										<div class="row">
											<div class="col-lg-7">
												<!--TITRE DE L'ARTICLE-->
												<h2 class="text-white display-5"> <a href="{{path('app_article_index', {'slug':article.slug})}}" class="btn-link text-reset fw-normal">{{ article.titre }}</a></h2>
													<!--LIEN VERS LE DETAIL DE L'ARTICLE-->
													<a href="{{path('app_article_index', {'slug':article.slug})}}">
														<!-- PRÉVISUALISATION DU CONTENU DE L'ARTICLE-->
														<p class="text-white">{{ article.contenu| striptags| u.truncate(200,"...",false)| raw }}</p>
													</a>
													<!-- Card info -->
													<ul class="nav nav-divider text-white-force align-items-center d-none d-sm-inline-block">
														<li class="nav-item">
															<div class="nav-link">
																<div class="d-flex align-items-center text-white position-relative">
																	{% include "partials/_avatar.html.twig" %}
																</div>
															</div>
														</li>
														<li class="nav-item">
															<!--DATE DE CRÉATION DE L'ARTICLE -->
															{{ article.createdAt|date('d/m/Y') }}
														</li>
													</ul>
											</div>
										</div>
									</div>
								</div>
							</div>
						{% endfor %}
					</div>
				</div>
			</div>
		</div>
	</div>
</section>
<!--Slider FIN-->

<!--Les derniers Articles  DEBUT-->
<section class="pt-4 my-4">
	<div class="container">
		<div class="row">
			<div class="col-md-12">
				<!-- TITRE DE LA RUBRIQUE -->
				<h2 class="mb-4"><i class="bi bi-megaphone"></i> Les derniers articles</h2>
					<div class="tiny-slider arrow-hover arrow-blur arrow-dark arrow-round mt-1">
						<div class = "tiny-slider-inner" 
							data-autoplay="true" 
							data-hoverpause="true" 
							data-gutter="24" 
							data-arrow="true" 
							data-dots="false" 
							data-items-xl="4" 
							data-items-lg="3" 
							data-items-md="3" 
							data-items-sm="2" 
							data-items-xs="1">
							<!--Boucle les articles des derniers articles du carrousselle-->
								{% for article in articles %}
								<div class="card">
									<div class="position-relative">
										<!--IMAGE DE L'ARTICLE-->
										<img class="card-img" src=" {{ vich_uploader_asset (article, 'imageFile')|default(asset('uploads/articles/Yadelair1.jpg'))| imagine_filter ('card') }} " alt="{{ article.titre }}">
									</div>
									<div class="card-body px-0 pt-3">
										<!--TITRE DE L'ARTICLE-->
										<h5 class="card-title"><a href="{{ path ('app_article_index', {'slug':article.slug})}}" class="btn-link text-reset fw-bold">{{ article.titre }}</a></h5>
											<!--LIEN VERS LE DÉTAIL DE L'ARTICLE-->
											<a href="{{ path ('app_article_index', {'slug':article.slug})}}">
												<!-- PRÉVISUALISATION DU CONTENU DE L'ARTICLE-->
												<p class="text-black">{{ article.contenu| striptags| u.truncate(100,"...",false)| raw }}</p>
											</a>
										<ul class="nav nav-divider align-items-center">
											<li class="nav-item">
												<div class="nav-link">
													<div class="d-flex align-items-center position-relative">
													{% include "partials/_avatar.html.twig" %}
													</div>
												</div>
											</li>
											<li class="nav-item"> 
												<!--DATE DE CREATION DE L'ARTICLE-->
												{{ article.createdAt|date('d/m/Y') }} 
											</li>
										</ul>
								</div>
							</div>
							{% endfor %}
					</div>
			</div>
		</div>
	</div>
</section>
<!--Les derniers Articles  FIN -->

<!--Dossier de la semaine DEBUT -->
<section>
	<div class="container">
		<div class="row">
			<div class="col">
				<!--TITRE DE LA SECTION "DOSSIER DE LA SEMAINE"-->
				<h2 class="m-0"><i class="bi bi-bookmark-star me-2"></i>Dossier de la semaine</h2>
				<div class="row gy-4">
					<!--BOUCLE POUR VÉRIFIER SI ARTICLES N'EST PAS VIDE -->
					{% if articles is not empty %}
					<div class="col-lg-7">
						<!--AFFICHE UN ARTICLE -->
						{% set article = articles[0] %}
						<!--AFFICHAGE DE L'IMAGE DE FOND -->	
						<div class = "card card-overlay-bottom card-bg-scale h-400 h-lg-560" 
							style="background-image:url({{ vich_uploader_asset (article, 'imageFile')|default(asset('uploads/articles/Yadelair1.jpg'))| imagine_filter ('dossier_semaine') }}); background-position: center left; background-size: cover;">
							<!-- Card Image overlay -->
							<div class="card-img-overlay d-flex align-items-center p-3 p-sm-5">
								<div class="w-100 mt-auto">
									<div class="col">
											<!--TITRE DE L'ARTICLE-->
											<h2 class="text-white display-6"> 
												<!--LIEN VERS LE DETAIL DE L'ARTICLE -->
												<a href=" {{path('app_article_index',{'slug':article.slug})}} " class="btn-link text-reset stretched-link fw-normal">
													<!--TITRE DE L'ARTICLE-->
													{{article.titre}}
												</a>
											</h2>
												<!-- PRÉVISUALISATION DU CONTENU DE L'ARTICLE-->
												<p>{{ article.contenu| striptags| u.truncate(150,"...",false)| raw }}</p>
										
											<ul class="nav nav-divider text-white-force align-items-center d-none d-sm-inline-block">
												<li class="nav-item">
													<div class="nav-link">
														<div class="d-flex align-items-center text-white position-relative">
															{% include "partials/_avatar.html.twig" %}
														</div>
													</div>
												</li>
												<!--DATE DE PUBLICATION DE L'ARTICLE -->
												<li class="nav-item">
													{{article.createdAt|date('d/m/Y')}}
												</li>
											</ul>
									</div>
								</div>
							</div>
						</div>
					</div>
					<!-- FIN DE LA BOUCLE POUR VÉRIFIER SI ARTICLES N'EST PAS VIDE -->
					{% endif %}

					<!--DOSSIER DE LA SEMAINE SIDEBAR-->

					<div class="col-lg-5">
						<!--BOUCLE POUR AFFICHER LES ARTICLES AVEC LE FILTRE "SLICE" POUR LES AFFICHER PAR LE NOMBRE VOULU-->
						{% for article in articles| slice (0,3) %}
							<!-- début d'affichage des articles  -->
							<div class="card mb-2 mb-md-4">
								<div class="row g-3">
									<div class="col-4">
										<!--IMAGE DE LARTICLE-->
										<img class="rounded-3" src=" {{ vich_uploader_asset (article, 'imageFile')|default(asset('uploads/articles/Yadelair1.jpg'))| imagine_filter ('side_bar') }} " alt="">
									</div>
									<div class="col-8">
										<!--TITRE DE L'ARTICLE-->
										<h5>
											<a href="{{path('app_article_index', {'slug':article.slug})}}" 
											class="btn-link stretched-link text-reset fw-bold">{{article.titre}}
											</a>
										</h5>
										<!--LIEN VERS LE DETAIL DE L'ARTICLE-->
										<a class="btn-link text-reset" href="{{path('app_article_index', {'slug':article.slug})}}">
											<!--PRÉVISUALISATION DE L'ARTICLE-->
											<p>{{ article.contenu| u.truncate(50,"...",false)| raw }}</p>
										</a>
										<ul class="nav nav-divider align-items-center d-none d-sm-inline-block">
											<li class="nav-item">
												<div class="nav-link">
													<div class="d-flex align-items-center position-relative">
															{% include "partials/_avatar.html.twig" %}
															<!--AUTEUR DE L'ARTICLE-->
															{{article.user.prenom ~ article.user.nom}}
														</a>
													</div>
												</div>
											</li>
											<li class="nav-item">
												<!--DATE DE PUBLICATION DE L'ARTICLE-->
												{{ article.createdAt|date('d/m/Y') }}
											</li>
										</ul>
									</div>
								</div>
							</div>
						<!--FIN DE LA BOUCLE AFFICHAGE DES ARTICLES-->
						{% endfor %}
					</div>
				</div>
			</div>
		</div>
	</div>
</section>
<!--Dossier de la semaine FIN -->


<!--Zoom  DÉBUT -->
<section>
	<div class="container">
			<div class="col-12 mb-4">
				<!--TITRE DE LA SECTION-->
				<h2><i class="bi bi-camera2"></i>  Zoom</h2>
			</div>
		<div class="row">
			<!--DÉBUT DE LA BOUCLE POUR AFFICHER LES ARTICLES AVEC LE FILTRE "SLICE" POUR AFFICHER LE NOMBRE D'ARTICLE VOULU -->
			{% for article in articles|slice(0,2) %}
				<div class="col-md-6 mb-4 mb-md-0">
					<!--AFFICHAGE DE L'IMAGE DE L'ARTICLE -->
					<div class="card card-overlay-bottom card-bg-scale h-300 h-lg-540" style="background-image:url( {{ vich_uploader_asset (article, 'imageFile')|default(asset('uploads/articles/Yadelair1.jpg'))| imagine_filter ('zoom') }}); background-position: center left; background-size: cover;">
						<!-- Card Image overlay -->
						<div class="card-img-overlay d-flex align-items-center p-3 p-sm-4">
							<div class="w-100 mt-auto">
								<div class="col">
									<!--TITRE DE L'ARTICLE-->
									<h2 class="text-white display-6">
										<!--LIEN DU DÉTAIL DE L'ARTICLE -->
										<a href="{{path('app_article_index', {'slug':article.slug})}}" class="btn-link text-reset stretched-link fw-normal">{{article.titre}}</a>
									</h2>
										<!--LIEN DU DÉTAIL DE L'ARTICLE -->
										<a class="btn-link text-reset" href="{{path('app_article_index', {'slug':article.slug})}}">
											<!--PRÉVISUALISATION DU CONTENU DE L'ARTICLE -->
											<p>{{ article.contenu| striptags| u.truncate(100,"...",false)| raw }}</p>
										</a>
									
									<ul class="nav nav-divider text-white-force align-items-center d-none d-sm-inline-block">
										<li class="nav-item">
											<div class="nav-link">
												<div class="d-flex align-items-center text-white position-relative">
													{% include "partials/_avatar.html.twig" %}
												</div>
											</div>
										</li>
										<!--DATE DE PUBLICATION DE L'ARTICLE-->
										<li class="nav-item">
											{{article.createdAt|date('d/m/Y')}}
										</li>
									</ul>
								</div>
							</div>
						</div>
					</div>
				</div>
			<!--FIN DE LA BOUCLE AFFICHAGE DES ARTICLES-->
			{% endfor %}
		</div>
	</div>
</section>
<!--Zoom END -->

<!--Newsletter START -->
<section class="pt-0">
	<div class="container">
		<div class="row">
			<div class="col">
				<div class="bg-dark p-3 p-sm-5 rounded-3 position-relative overflow-hidden">
					<!-- SVG shape START -->
					<figure class="position-absolute top-50 start-50 translate-middle">
						<svg width="1848" height="481" viewbox="0 0 1848.9 481.8" xmlns="http://www.w3.org/2000/svg">
							<path class="fill-warning" d="m779.4 251c-10.3-11.5-19.9-23.8-29.4-36.1-9-11.6-18.4-22.8-27.1-34.7-15.3-21.2-30.2-45.8-54.8-53.3-10.5-3.2-21.6-3.2-30.6 2.5-7.6 4.8-13 12.6-17.3 20.9-10.8 20.6-16.1 44.7-24.6 66.7-7.9 20.2-19.4 38.6-33.8 54.3-14.7 16.2-31.7 30-50.4 41-15.9 9.4-33.4 17.2-52 19.3-18.4 2-38-2.5-56.5-6.2-22.4-4.4-45.1-9.7-67.6-10.9-9.8-0.5-19.8-0.3-29.1 2.3-9.8 2.8-18.7 8.6-26.6 15.2-17.3 14.5-30.2 34.4-43.7 52.9-12.9 17.6-26.8 34.9-45.4 45.4-19.5 11-42.6 12.1-65 6.6-52.3-13.1-93.8-56.5-127.9-101.5-8.8-11.6-17.3-23.4-25.6-35.4-0.6-0.9-1.1-1.8-1.6-2.7-1.1-2.4-0.9-2.6 0.6-1.2 1 0.9 1.9 1.9 2.7 3 35.3 47.4 71.5 98.5 123.2 123.9 22.8 11.2 48.2 17.2 71.7 12.2 23-5 40.6-21.2 55.3-39.7 24.5-30.7 46.5-75.6 87.1-83 19.5-3.5 40.7 0.1 60.6 3.7 21.2 3.9 42.3 9.1 63.6 11.7 17.8 2.3 35.8-0.1 52.2-7 20-8.1 38.4-20.2 54.8-34.6 16.2-14.1 31-30.7 41.8-50.4 11.1-20.2 17-43.7 24.9-65.7 6.1-16.9 13.8-36.2 29.3-44.5 16.1-8.6 37.3-1.9 52.3 10.6 18.7 15.6 31.2 39.2 46.7 58.2"/>
							<path class="fill-warning" d="m1157.9 344.9c9.8 7.6 18.9 15.8 28.1 24 8.6 7.7 17.6 15.2 26 23.2 14.8 14.2 29.5 30.9 51.2 34.7 9.3 1.6 18.8 0.9 26.1-3.8 6.1-3.9 10.2-9.9 13.2-16.2 7.6-15.6 10.3-33.2 15.8-49.6 5.2-15.1 13.6-29 24.7-41.3 11.4-12.6 24.8-23.6 40-32.8 12.9-7.8 27.3-14.6 43.1-17.3 15.6-2.6 32.8-0.7 49 0.7 19.6 1.7 39.4 4 58.8 3.4 8.4-0.3 17-1.1 24.8-3.6 8.2-2.7 15.4-7.4 21.6-12.7 13.7-11.6 23.1-26.7 33.3-40.9 9.6-13.5 20.2-26.9 35.3-35.6 15.8-9.2 35.6-11.6 55.2-9.1 45.7 5.8 84.8 34.3 117.6 64.4 8.7 8 17.2 16.2 25.6 24.6 2.5 3.2 1.9 3-1.2 1-34.3-32-69.7-66.9-116.5-81.9-20.5-6.5-42.7-9.2-62.4-4-19.3 5.1-33.1 17.9-44.3 32.2-18.5 23.7-33.9 57.5-68.1 65.5-16.5 3.8-34.9 2.6-52.3 1.3-18.5-1.4-37-3.7-55.4-4.2-15.5-0.5-30.7 2.5-44.2 8.5-16.5 7.2-31.3 17.1-44.3 28.5-12.8 11.2-24.1 24.1-31.9 39-7.9 15.3-11.1 32.5-16.2 48.9-3.9 12.6-9 26.9-21.6 33.9-13.1 7.3-31.9 3.8-45.7-4.1-17.2-10-29.9-26.1-44.6-38.8"/>
							<path class="fill-warning opacity-6" d="m1840.8 379c-8.8 40.3-167.8 79.9-300.2 45.3-42.5-11.1-91.4-32-138.7-11.6-38.7 16.7-55 66-90.8 67.4-25.1 1-48.6-20.3-58.1-39.8-31-63.3 50.7-179.9 155.7-208.1 50.4-13.5 97.3-3.2 116.1 1.6 36.3 9.3 328.6 87.4 316 145.2z"/>
							<path class="fill-warning opacity-6" d="M368.3,247.3C265.6,257.2,134,226,110.9,141.5C85,47.2,272.5-9.4,355.5-30.7s182.6-31.1,240.8-18.6    C677.6-31.8,671.5,53.9,627,102C582.6,150.2,470.9,237.5,368.3,247.3z"/>
						</svg>
					</figure>
					<!-- SVG shape END -->

					<div class="row">
						<div class="col-md-8 col-lg-6 mx-auto text-center py-5 position-relative">
							<!-- TITRE  -->
							<h2 class="display-4 text-white">Newsletters</h2>
								<!-- CONTENU -->
								<p class="text-white">Recevez les actualités les plus récents et les mises à jour de nos articles.</p>
							<!-- FORMULAIRE D'INSCRIPTION À LA NEWSLETTER -->
							{{form_start(form)}}
								<form class="row-cols-sm-auto g-2 align-items-center justify-content-center mt-3">
									<div class="d-flex ">
										<div class="col-12">
											<div class="form-control form-control-md my-3">
												{{form_widget(form.Email)}}
											</div>
											{{ form_widget(form.Envoyer)}}
										</div>
									</div>
									<div class="form-text text-white opacity-6 mt-2">En vous abonnant, vous acceptez notre
										<!--LIEN VERS LA POLITIQUE DE CONFIDENTIALITÉ-->
										<a href="{{ path ('app_privacy_policy')}}" class="text-decoration-underline text-reset">Politique de confidentialités</a>
									</div>
								</form>
							<!--FIN DU FORMULAIRE D'INSCRIPTION À LA NEWSLETTER-->
							{{ form_end(form) }}
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</section>
<!--Newsletter END -->
	<!-- **************** MAIN CONTENT END **************** -->
</main>
{% endblock %}
